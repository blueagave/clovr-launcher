<!-- extend base layout -->
{% extends "layout.html" %}

{% block head %}
{{ super() }}
{% endblock %}
{% block title %}Register New Account{% endblock %}

{% block sidebar %}{% endblock %}
{% block nosidebar %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="row">
  <div class="col-md-12">
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">
      <a class="close" title="Close" href="#" data-dismiss="alert">&times;</a>
     {{message}}
    </div><!-- end .alert -->
    {% endfor %}
  </div><!-- end col-md -->
</div><!-- end row -->
    {% endif %}
{% endwith %}

<div class="container sign-up">
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <br />
            <div class="tab-content">
                <div class="tab-pane fade in active" id="new">
                    <br />
                    <span>
                        <img alt="CloVR logo" class="clovr-logo" src="{{ url_for('static', filename='img/logo-transparent-login.png') }}" />
                    </span>
                    <hr />
                    <form method="POST" action="{{ url_for('public.register') }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <fieldset>
                            <div class="form-group">
                                <div class="right-inner-addon {% if form.username.errors %} has-error {% endif %}">
                                    <i class="fa fa-user"></i>
                                    {{ form.username(class="form-control input-lg") }}
                                </div>
                                {% if form.username.errors %}
                                    <div class="has-error">
                                        <span>{% for error in form.username.errors %}{{ error }}{% endfor %}</span>
                                    </div>
                                {% endif %}
                            </div>   
                            
                            <div class="form-group {% if form.password.errors %} has-error {% endif %}">
                                <div class="right-inner-addon has-danger">
                                    <i class="fa fa-lock"></i>
                                    {{ form.password(class="form-control input-lg") }}
                                </div>

                                {% if form.password.errors %}
                                    <div class="has-error">
                                        <span>{% for error in form.password.errors %}{{ error }}{% endfor %}</span>
                                    </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <div class="right-inner-addon {% if form.confirm.errors %} has-error {% endif %}">
                                    <i class="fa fa-warning"></i>
                                    {{ form.confirm(class="form-control input-lg") }}
                                </div>

                                {% if form.confirm.errors %}
                                    <div class="has-error">
                                        <span>{% for error in form.confirm.errors %}{{ error }}{% endfor %}</span>
                                    </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <div class="right-inner-addon {% if form.access_key.errors %} has-error {% endif %}">
                                    <i class="fa fa-cubes"></i>
                                    {{ form.access_key(class="form-control input-lg") }}
                                </div>
                                {% if form.access_key.errors %}
                                    <div class="has-error">
                                        <span>{% for error in form.access_key.errors %}{{ error }}{% endfor %}</span>
                                    </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <div class="right-inner-addon {% if form.secret_key.errors %} has-error {% endif %}">
                                    <i class="fa fa-cubes"></i>
                                    {{ form.secret_key(class="form-control input-lg") }}
                                </div>
                                {% if form.secret_key.errors %}
                                    <div class="has-error">
                                        <span>{% for error in form.secret_key.errors %}{{ error }}{% endfor %}</span>
                                    </div>
                                {% endif %}

                            </div>
                        </fieldset>

                        <div class="text-center">
                            <u class="dotted"><a id="toggle_help" class="help-text text-center" href="#">Give me some help here!</a></u>
                        </div>

                        <br>
                        <div class=" text-center" data-position="bottom">
                            <button class="btn btn-primary btn-lg btn-block">Register</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
